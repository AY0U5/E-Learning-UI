<div class="grid" *ngIf="listActionIsValid">
    <div class="col-12">
        <p-toast></p-toast>
<!--        <div class="card">-->
            <!-- <p-toolbar styleClass="mb-4">
                 <ng-template pTemplate="left">
                     <button pButton pRipple label=" {{'new' | translate}}" icon="pi pi-plus"
                             class="p-button-info mr-2 mb-2" (click)="openCreate('Quiz')"
                             *ngIf="createActionIsValid"></button>
                     <button [disabled]="isSelectionDisabled()" pButton pRipple label=" {{'delete' | translate}}"
                             icon="pi pi-trash" class="p-button-danger mr-2 mb-2" (click)=deleteMultiple()
                             *ngIf="deleteActionIsValid"></button>
                     <button pButton pRipple label=" {{'search' | translate}}"
                             icon="pi pi-{{findByCriteriaShow?'angle-down':'angle-right'}}"
                             class="p-button-secondary mr-2 mb-2" (click)="this.showSearch()"></button>
                 </ng-template>
                 <ng-template pTemplate="right">
                     <div class="flex">
                         <p-splitButton label=" {{'export' | translate}}" icon="pi pi-download"
                                        styleClass="p-button-secondary" [model]="excelPdfButons"></p-splitButton>
                     </div>
                 </ng-template>

             </p-toolbar>
 -->
        <div class="flex-container">
            <div class="left-container">
                <div class="mb-4 connn">
                    <p-card  [style]="{width: '100%'}">
                        <div *ngIf="!this.addquiz" class="formgrid grid">
                            <div class="field col-12 with-border">
                                <input id="quizLabel" type="text" placeholder="Quiz Label"
                                       [(ngModel)]="item.lib"   class="iiiinp surface-overlay p-2 border-0 outline-none w-full">
                            </div>

                            <div class="field col-12 md:col-6 with-border">
                                <!--<label for="ref">Ref</label>
                                <input id="ref" type="text" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">-->
                                <input id="ref" type="text" placeholder="Ref"
                                       [(ngModel)]="item.ref"   class="iiiinp surface-overlay p-2 border-0 outline-none w-full">
                            </div>

                            <div class="field col-12 md:col-6 with-border">
                                <input id="numero" type="text" placeholder="Numero"
                                       [(ngModel)]="item.numero"    class="iiiinp surface-overlay p-2 outline-none w-full">
                            </div>

                            <div class="field col-12 md:col-6 with-border">
                                <div >
                                    <p-dropdown appendTo="body" [options]="sections" [(ngModel)]="item.section" id="quizsection" [filter]="true" filterMatchMode="contains"
                                                [style]="{ 'border': 'none', 'border-bottom': '2px solid transparent', 'box-shadow': 'none', 'width': '100%' , 'font-size': '1.2rem'}"
                                                [showClear]="true" optionLabel="code" placeholder="{{ 'quiz.section' | translate }}"
                                              >
                                    </p-dropdown>
                                </div>
                            </div>


                            <div class="field col-12 md:col-6 with-border">
                                <input id="seuilReussite" type="text" placeholder="Seuil de Reussite"
                                       [(ngModel)]="item.seuilReussite"    class="iiiinp surface-overlay p-2 border-0 outline-none w-full">
                            </div>

                                <div class="field col-12">
<!--                                    <button [style]="{'background-color': '#ff725e' , 'height': '100%'}" pButton pRipple label="Ajouter Quiz" icon="pi pi-plus" class="p-button mr-2 mb-2 bouton" (click)="saveQuiz()" ></button>-->
                                </div>

                        </div>

                        <div *ngIf="this.addquiz" class="formgrid grid">
                            <div class="field with-border st">
                                <h3>Quiz label</h3>
                                <input id="quizshow" type="text" placeholder="Quiz Label"
                                       [ngModel]="itemQuizShow.lib"   class="iiiinp surface-overlay p-2 border-0 outline-none w-full" readonly>
                            </div>
                        </div>
                    </p-card>
                </div>

                <app-question-list-admin *ngIf="showqst"></app-question-list-admin>
            </div>

            <div *ngIf="!this.addquiz" class="right-container">


                <div class="button-container shadow-2 hover:shadow-5">
                    <div class="button-group">
                        <div class="button-row">
<!--                            <span class="icon-button pi pi-plus" style="font-size: 1.5rem" (click)="foraddQuestion()" ></span>-->
                            <app-quiz-create-admin></app-quiz-create-admin>
                        </div>
                    </div>
                </div>

            </div>
        </div>



        <!--    <p-toolbar *ngIf="findByCriteriaShow">

                <div class="col-12">
                    <div class="flex flex-wrap p-fluid col-12">
                       <div class="lg:col-3 md:col-6 sm:col-12 mb-4">
                            <label  class="font-bold block mb-2" for="1">{{'quiz.ref' | translate}}</label>
                            <input  class="w-full"  pInputText id="1" type="text"  [(ngModel)]="criteria.refLike">
                        </div>
                       <div class="lg:col-3 md:col-6 sm:col-12 mb-4">
                            <label  class="font-bold block mb-2" for="2">{{'quiz.lib' | translate}}</label>
                            <input  class="w-full"  pInputText id="2" type="text"  [(ngModel)]="criteria.libLike">
                        </div>

                        <div class="lg:col-3 md:col-6 sm:col-12 mb-4">
                            <label class="font-bold block mb-2" for="3-1">{{'quiz.dateDebutMin' | translate}}</label>
                            <p-calendar class="mr-2" [(ngModel)]="criteria.dateDebutFrom"
                                    id="3-1" dateFormat="dd-MM-yy"  [showIcon]="true"  class="p-fluid"></p-calendar>
                        </div>

                        <div class="lg:col-3 md:col-6 sm:col-12 mb-4">
                            <label  class="font-bold block mb-2" for="3-2">{{'quiz.dateDebutMax' | translate}}</label>
                            <p-calendar class="mr-2" [(ngModel)]="criteria.dateDebutTo"
                                    id="3-2" dateFormat="dd-MM-yy"  [showIcon]="true" class="p-fluid"></p-calendar>
                        </div>


                        <div class="lg:col-3 md:col-6 sm:col-12 mb-4">
                            <label class="font-bold block mb-2" for="4-1">{{'quiz.dateFinMin' | translate}}</label>
                            <p-calendar class="mr-2" [(ngModel)]="criteria.dateFinFrom"
                                    id="4-1" dateFormat="dd-MM-yy"  [showIcon]="true"  class="p-fluid"></p-calendar>
                        </div>

                        <div class="lg:col-3 md:col-6 sm:col-12 mb-4">
                            <label  class="font-bold block mb-2" for="4-2">{{'quiz.dateFinMax' | translate}}</label>
                            <p-calendar class="mr-2" [(ngModel)]="criteria.dateFinTo"
                                    id="4-2" dateFormat="dd-MM-yy"  [showIcon]="true" class="p-fluid"></p-calendar>
                        </div>

                        <div class="lg:col-3 md:col-6 sm:col-12 mb-4">
                            <label  class="font-bold block mb-2" for="7-2">{{'quiz.section' | translate}}</label>
                            <p-dropdown [options]="sections" [(ngModel)]="criteria.section" id="7" [filter]="true" class="p-fluid"
                                        [showClear]="true"  placeholder="{{'quiz.section' | translate}}" optionLabel="code">
                            </p-dropdown>
                        </div>
                        <div class="lg:col-3 md:col-6 sm:col-12 mb-4">
                            <label  class="font-bold block mb-2" for="8-1">{{'quiz.numeroMin' | translate}}</label>
                            <p-inputNumber  mode="decimal" [(ngModel)]="criteria.numeroMin" id="8-1"></p-inputNumber>
                        </div>
                        <div class="lg:col-3 md:col-6 sm:col-12 mb-4">
                            <label  class="font-bold block mb-2" for="8-2">{{'quiz.numeroMax' | translate}}</label>
                            <p-inputNumber  mode="decimal" [(ngModel)]="criteria.numeroMax" id="8-2"></p-inputNumber>
                       </div>
                        <div class="lg:col-3 md:col-6 sm:col-12 mb-4">
                            <label  class="font-bold block mb-2" for="9-1">{{'quiz.seuilReussiteMin' | translate}}</label>
                            <p-inputNumber  mode="decimal" [(ngModel)]="criteria.seuilReussiteMin" id="9-1"></p-inputNumber>
                        </div>
                        <div class="lg:col-3 md:col-6 sm:col-12 mb-4">
                            <label  class="font-bold block mb-2" for="9-2">{{'quiz.seuilReussiteMax' | translate}}</label>
                            <p-inputNumber  mode="decimal" [(ngModel)]="criteria.seuilReussiteMax" id="9-2"></p-inputNumber>
                       </div>
                    </div>
                    <div [style]="{ marginTop : '1rem', display: 'flex', justifyContent: 'flex-end' }">
                        <button pButton pRipple label="{{'validate' | translate}}" icon="pi pi-sort-amount-down" class="p-button-info mr-2" (click)="findPaginatedByCriteria()"></button>
                    </div>
                </div>


            </p-toolbar>-->


            <!--           <p-table #dt [value]="items" [columns]="cols" [rows]="8" [paginator]="false"
                               [globalFilterFields]="['ref', 'lib', 'dateDebut', 'dateFin', 'sectioncode', 'numero', 'seuilReussite']" [(selection)]="selections"
                               [rowHover]="true" dataKey="id" styleClass="p-datatable-customers"
                               currentPageReportTemplate="{{'les éléments de {first} à {last} sur {totalRecords} ' | translate}}"
                               [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]" selectionMode="multiple">
                           <ng-template pTemplate="caption">
                               <div class="flex flex-column flex-row justify-content-between table-header">
                                   <h5 class="p-m-0">{{'quiz.header' | translate}}</h5>
                                   <span class="p-input-icon-left ml-auto">
                                       <i class="pi pi-search"></i>
                                       <input pInputText type="text" placeholder="{{'searchInput' | translate}}" (input)="dt.filterGlobal($event.target.value, 'contains')"/>
                                   </span>
                               </div>
                           </ng-template>
                           <ng-template pTemplate="header">
                               <tr>
                                   <th style="width: 3rem">
                                       <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                                   </th>

                                   <th pSortableColumn="ref">
                                       <div class="p-d-flex p-jc-between p-ai-center">
                                           <span>{{'quiz.ref' | translate}}</span>
                                           <p-sortIcon field="ref"></p-sortIcon>
                                           <p-columnFilter type="text" field="element.ref" display="menu" class="ml-auto"></p-columnFilter>
                                       </div>
                                   </th>


                                   <th pSortableColumn="lib">
                                       <div class="p-d-flex p-jc-between p-ai-center">
                                           <span>{{'quiz.lib' | translate}}</span>
                                           <p-sortIcon field="lib"></p-sortIcon>
                                           <p-columnFilter type="text" field="element.lib" display="menu" class="ml-auto"></p-columnFilter>
                                       </div>
                                   </th>


                                   <th pSortableColumn="dateDebut">
                                       <div class="p-d-flex p-jc-between p-ai-center">
                                           <span>{{'quiz.dateDebut' | translate}}</span>
                                           <p-sortIcon field="dateDebut"></p-sortIcon>
                                       </div>
                                   </th>


                                   <th pSortableColumn="dateFin">
                                       <div class="p-d-flex p-jc-between p-ai-center">
                                           <span>{{'quiz.dateFin' | translate}}</span>
                                           <p-sortIcon field="dateFin"></p-sortIcon>
                                       </div>
                                   </th>


                                   <th pSortableColumn="section">
                                       <div class="p-d-flex p-jc-between p-ai-center">
                                           <span>{{'quiz.section' | translate}}</span>
                                           <p-sortIcon field="section"></p-sortIcon>
                                       </div>
                                   </th>


                                   <th pSortableColumn="numero">
                                       <div class="p-d-flex p-jc-between p-ai-center">
                                           <span>{{'quiz.numero' | translate}}</span>
                                           <p-sortIcon field="numero"></p-sortIcon>
                                       </div>
                                   </th>


                                   <th pSortableColumn="seuilReussite">
                                       <div class="p-d-flex p-jc-between p-ai-center">
                                           <span>{{'quiz.seuilReussite' | translate}}</span>
                                           <p-sortIcon field="seuilReussite"></p-sortIcon>
                                       </div>
                                   </th>

                                   <th>Actions</th>
                               </tr>
                           </ng-template>
                           <ng-template pTemplate="body" let-element>
                               <tr>
                                   <td>
                                       <p-tableCheckbox [value]="element"></p-tableCheckbox>
                                   </td>

                                   <td>{{element.ref}}</td>


                                   <td>{{element.lib}}</td>


                                   <td>{{element.dateDebut | date :'dd/MM/yyyy HH:mm' }}</td>


                                   <td>{{element.dateFin | date :'dd/MM/yyyy HH:mm' }}</td>


                                   <td>{{element.section?.code}}</td>


                                   <td>{{element.numero}}</td>


                                   <td>{{element.seuilReussite}}</td>

                                   <td>
                                       <button pButton pRipple icon="pi pi-pencil"  class="p-button-rounded p-button-info mr-2" (click)="edit(element)"  *ngIf="editActionIsValid"></button>
                                       <button pButton pRipple icon="pi pi-list" class="p-button-rounded p-button-secondary mr-2" (click)="view(element)"  *ngIf="viewActionIsValid"></button>
                                       <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-danger mr-2" (click)="delete(element)"  *ngIf="deleteActionIsValid"></button>
                                       <button pButton pRipple icon="pi pi-copy" class="p-button-rounded p-button-raised p-button-warning mr-2" (click)="duplicate(element)"  *ngIf="duplicateActionIsValid"></button>
                                   </td>
                               </tr>
                           </ng-template>

                           <ng-template pTemplate="summary">
                               <p-paginator  [rows]="10" [totalRecords]="totalRecords" (onPageChange)="onPage($event)"></p-paginator>
                               <div class="p-d-flex p-ai-center p-jc-between">
                                   En totale il {{items ? totalRecords == 1 ? 'y a' : 'y a' : 'y a' }} {{items ? totalRecords : 0 }} {{items ? totalRecords == 1 ? 'quiz' : 'quizs' : 0 }}.
                               </div>
                           </ng-template>
                       </p-table>-->
        </div>

        <app-quiz-create-admin *ngIf="createDialog  && createActionIsValid"></app-quiz-create-admin>
        <app-quiz-edit-admin *ngIf="editDialog  && editActionIsValid"></app-quiz-edit-admin>
        <app-quiz-view-admin *ngIf="viewDialog  && viewActionIsValid"></app-quiz-view-admin>
        <p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>
    </div>
<!--</div>-->

<p-card header="Permission not allowed" *ngIf="!listActionIsValid">
    <p class="m-0">
        You don't have permission to access !
    </p>
</p-card>

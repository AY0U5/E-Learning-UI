
<div class="flex">
    <div class="col col-9">
        <div class="flex">
           <!-- <div class="flex justify-content-center">
                <button pButton class="m-2 col col-1 mb-3" icon="pi pi-image" (click)="imageIsOk()"></button>
                <button pButton class="m-2 col col-1 mb-3" icon="pi pi-video" (click)="videoIsOk()"></button>
                <button pButton class="m-2 col col-1 mb-3" icon="pi pi-plus-circle" (click)="quizIsOk()"></button>
            </div>-->
<!--            <button pButton class="col col-2 col-offset-8 mb-3" (click)="previewIsOk()" label="Preview"></button>-->
<!--            <button pButton class="col col-2 col-offset-8 mb-3" (click)="previewIsOk()" label="Preview"></button>-->

        </div>
        <app-preview-dialog></app-preview-dialog>
        <!--<div>
            <angular-editor [(ngModel)]="item.contenu" [config]="editorConfig"></angular-editor>
            <button (click)="insertVideo()">Insert Video</button>
            <button (click)="printContent()">Print</button>
        </div>-->
<!--                <p-editor id="editeur" [(ngModel)]="item.contenu" [style]="{height: '30rem'}"></p-editor>-->
      <!--  <ckeditor [(ngModel)]="item.contenu" ></ckeditor>-->
        <!--<div>
            <ckeditor [(ngModel)]="item.contenu"></ckeditor>
            <button pButton class="col col-2 col-offset-8 mb-3" (click)="previewIsOk()" label="Preview"></button>
            <p-dialog [(visible)]="okPreview" [style]="{width: '60vw'}" header="Preview">
                <div [innerHTML]="item.contenu" class="content-preview"></div>
            </p-dialog>
        </div>-->

        <div class="flex mt-3">
            <button pButton (click)="saveContent()" class="col col-2 p-button-success" label="Save"></button>
            <button pButton (click)="prevCard()" class="col col-2 col-offset-5 p-button-danger" label="Previous"></button>
            <button pButton (click)="nextCard()" class="col col-2 col-offset-1 p-button-warning" label="Next"></button>
        </div>
    </div>
    <div class="col col-3 mt-8 catre-container">
        <div class="m-3 catre"
             *ngFor="let cat of sections; let i = index"
             [ngStyle]="{'background-color': i === selectedCardIndex? 'rgb(252,141,93)' : 'white'}"
             (click)="selectCard(cat,i)">
            <span class="col col-2">{{cat.numeroOrder}}</span>
            <span class="col col-6">{{cat.categorieSection.libelle}}</span>
        </div>
    </div>
</div>


<!--<p-dialog [(visible)]="okPreview" [style]="{width: '60vw'}">




</p-dialog>-->

<!-- ////////// Preview \\\\\\\\\ -->
<p-dialog [(visible)]="okPreview" [style]="{width: '60vw'}">
    <div class="flex">
        <div class="col col-8 cont">
            <div id="htmlEditor" *ngFor="let cont of sections; let j=index">
                <div class="flex flex-column" id="contentWithoutTags" *ngIf="j === selectedCardIndex">
                    <!--                    {{ stripHtmlTags(cont.contenu) }}-->
                    <div [innerHTML]="sanitizeHtml(cont.contenu)" ></div>
                    <!--<div>
                        <img class="m-5 justify-content-center" *ngIf="cont.urlImage" src='{{cont.urlImage}}'/>
                    </div>
                    <div class="justify-content-center" *ngIf="cont.urlVideo">
                        <iframe width="500" height="400" [src]="getYouTubeEmbedUrl(cont.urlVideo)" frameborder="0" allowfullscreen></iframe>
                    </div>-->

                </div>
            </div>
        </div>
        <div class="col col-4 catre-container">
            <div class="m-3 catre"
                 *ngFor="let cat of sections; let i = index"
                 [ngStyle]="{'background-color': i === selectedCardIndex? 'rgb(255,111,101)' : 'white'}"
                 (click)="selectCard(cat,i)">
                <span class="col col-2">{{cat.numeroOrder}}</span>
                <span class="col col-5">{{cat.categorieSection.libelle}}</span>
            </div>
            <div class="flex mt-3">
                <button pButton (click)="prevCard()" class="col col-5 p-button-danger" label="Previous"></button>
                <button pButton (click)="nextCard()" class="col col-5 col-offset-2 p-button-warning" label="Next"></button>
            </div>
        </div>
    </div>
</p-dialog>
<!--<p-dialog [(visible)]="okPreview" [style]="{width: '60vw'}">
    <div class="flex">
        <div class="col col-8 cont">
            <div id="htmlEditor" *ngFor="let cont of sections; let j=index">
                <div class="flex flex-column" id="contentWithoutTags" *ngIf="j === selectedCardIndex">
&lt;!&ndash;                    {{ stripHtmlTags(cont.contenu) }}&ndash;&gt;
                    &lt;!&ndash;<div>
                        <img class="m-5 justify-content-center" *ngIf="cont.urlImage" src='{{cont.urlImage}}'/>
                    </div>
                    <div class="justify-content-center" *ngIf="cont.urlVideo">
                        <iframe width="500" height="400" [src]="getYouTubeEmbedUrl(cont.urlVideo)" frameborder="0" allowfullscreen></iframe>
                    </div>&ndash;&gt;
                </div>
            </div>
        </div>
        <div class="col col-4 catre-container">
            <div class="m-3 catre"
                 *ngFor="let cat of sections; let i = index"
                 [ngStyle]="{'background-color': i === selectedCardIndex? 'rgb(255,111,101)' : 'white'}"
                 (click)="selectCard(cat,i)">
                <span class="col col-2">{{cat.numeroOrder}}</span>
                <span class="col col-5">{{cat.categorieSection.libelle}}</span>
            </div>
            <div class="flex mt-3">
                <button pButton (click)="prevCard()" class="col col-5 p-button-danger" label="Previous"></button>
                <button pButton (click)="nextCard()" class="col col-5 col-offset-2 p-button-warning" label="Next"></button>
            </div>
        </div>
    </div>
</p-dialog>-->


<!-- ////////// add image \\\\\\\\\ -->
<p-dialog [(visible)]="okImage" [style]="{width: '60vw'}">
    <div class="flex flex-column gap-2">
        <label for="image">Image url</label>
        <input
            pInputText
            id="image"
            [(ngModel)]="urlImage" />
    </div>
    <div class="col col-2 col-offset-10">
        <button pButton icon="pi pi-image" label="ajouter" (click)="saveImage(urlImage)"></button>
    </div>
</p-dialog>


<!-- ////////// add video \\\\\\\\\ -->
<p-dialog [(visible)]="okVideo" [style]="{width: '60vw'}">
    <div class="flex flex-column gap-2">
        <label for="video">Video url</label>
        <input
            pInputText
            id="video"
            [(ngModel)]="urlVideo" />
    </div>
    <div class="col col-2 col-offset-10">
        <button pButton icon="pi pi-video" label="ajouter" (click)="saveVideo(urlVideo)"></button>
    </div>
</p-dialog>

<!-- ////////// quiz \\\\\\\\\ -->
<p-dialog [(visible)]="okQuiz" [style]="{width: '60vw'}">
    <div class="grid">
        <div class="field col-12 md:col-6">
            <label for="1">{{'quiz.ref' | translate}}<span style="color: red;">*</span></label>
            <input class="mb-2 mr-2" type="text" pInputText  placeholder="{{'quiz.ref' | translate}}" id="1" [(ngModel)]="getQuiz().ref"
                   [ngClass]="{'ng-invalid ng-dirty' : !validQuizRef}"  />
            <small class='p-error' *ngIf='!validQuizRef'>Ref est obligatoire.</small>
        </div>
        <div class="field col-12 md:col-6">
            <label for="2">{{'quiz.lib' | translate}}<span style="color: red;">*</span></label>
            <input class="mb-2 mr-2" type="text" pInputText  placeholder="{{'quiz.lib' | translate}}" id="2" [(ngModel)]="getQuiz().lib"
                   [ngClass]="{'ng-invalid ng-dirty' : !validQuizLib}"  />
            <small class='p-error' *ngIf='!validQuizLib'>Lib est obligatoire.</small>
        </div>
        <div class="field col-12 md:col-6">
            <label for="3">{{'quiz.dateDebut' | translate}}</label>
            <p-calendar appendTo="body" id="3"  [showTime]="true" [showSeconds]="false" placeholder="{{'quiz.dateDebut' | translate}}"  [(ngModel)]="getQuiz().dateDebut">
            </p-calendar>

        </div>
        <div class="field col-12 md:col-6">
            <label for="4">{{'quiz.dateFin' | translate}}</label>
            <p-calendar appendTo="body" id="4"  [showTime]="true" [showSeconds]="false" placeholder="{{'quiz.dateFin' | translate}}"  [(ngModel)]="getQuiz().dateFin">
            </p-calendar>

        </div>
        <div class="field col-11 md:col-6">
            <label for="7">{{'quiz.section' | translate}}</label>
            <p-dropdown  appendTo="body"  [options]="sections" [(ngModel)]="getQuiz().section" id="7" [filter]="true" filterMatchMode="contains"
                         [showClear]="true" optionLabel="code" placeholder="{{'quiz.section' | translate}}"  >
            </p-dropdown>

        </div>
        <div class="field col-12 md:col-6">
            <label for="8">{{'quiz.numero' | translate}}</label>
            <p-inputNumber class="mb-2 mr-2" id="8" placeholder="{{'quiz.numero' | translate}}" [(ngModel)]="getQuiz().numero"  >
            </p-inputNumber>

        </div>
        <div class="field col-12 md:col-6">
            <label for="9">{{'quiz.seuilReussite' | translate}}</label>
            <p-inputNumber class="mb-2 mr-2" id="9" placeholder="{{'quiz.seuilReussite' | translate}}" [(ngModel)]="getQuiz().seuilReussite"  >
            </p-inputNumber>

        </div>
    </div>
</p-dialog>
